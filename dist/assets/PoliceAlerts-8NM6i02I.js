import{r as l,j as e}from"./charts-FoNSDMOs.js";import{p as o}from"./PoliceDashboard-Beqh-GUO.js";import"./react-BzrpNAyj.js";import"./pdf-DU8byqIM.js";import"./index-BMC4Z6Sv.js";import"./icons-CvT1UHUk.js";import"./BrandIcon-CHAwuYok.js";import"./api-CtY0n1IG.js";import"./NotificationToast-Crl73ake.js";import"./index-t3l0xEWF.js";function b({token:t}){const[i,d]=l.useState([]),[n,c]=l.useState(null);l.useEffect(()=>{o.listAlerts(t).then(s=>d(s.alerts)).catch(s=>c(s.message||"Failed to load alerts"))},[t]);async function m(s){if(s)try{await o.handleAlert(t,s),d(r=>r.map(a=>a._id===s?{...a,handled:!0}:a))}catch(r){c(r.message||"Failed to mark handled")}}return e.jsxs("div",{className:"panel",children:[e.jsx("div",{className:"label",children:"Emergency Alerts"}),n&&e.jsx("div",{className:"form-error",children:n}),e.jsxs("div",{className:"list",style:{display:"flex",flexDirection:"column",gap:8},children:[i.map(s=>e.jsxs("div",{className:"card",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[e.jsx("span",{className:`badge ${s.priority}`,children:s.priority?.toUpperCase()}),e.jsx("strong",{children:s.title})]}),e.jsxs("div",{className:"muted",style:{fontSize:12},children:["Created: ",new Date(s.createdAt||"").toLocaleString()]})]}),e.jsx("div",{children:s.handled?e.jsx("span",{className:"badge success",children:"Handled"}):e.jsx("button",{className:"btn sm",onClick:()=>m(s._id),children:"Mark as Handled"})})]},s._id)),i.length===0&&e.jsx("div",{className:"muted",children:"No active alerts."})]}),e.jsx("audio",{id:"alertSound",src:"/sounds/alert.mp3",preload:"auto"}),e.jsx("div",{className:"muted",style:{marginTop:8},children:"Alert sound and blinking UI can be enhanced later."})]})}export{b as default};
