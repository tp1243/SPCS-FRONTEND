import{r as t,j as e}from"./charts-FoNSDMOs.js";import{A as w}from"./AuthShowcase-DUKvnRBk.js";import{l as S}from"./loginimg-DZn52-M4.js";import{C as v,D as y}from"./index-BMC4Z6Sv.js";import{A as N,S as b,O as k}from"./OtpModal-DKhgOXJk.js";import{u as E,a as L,L as h}from"./index-pk8n74D1.js";import{m as A}from"./motion-B__JDtHc.js";import"./react-BzrpNAyj.js";import"./icons-CvT1UHUk.js";import"./index-D8KJrxB-.js";import"./BrandIcon-CHAwuYok.js";import"./api-DtIH5hBN.js";import"./pdf-DU8byqIM.js";function z(){const l=E(),n=L(),[a,p]=t.useState(""),[o,g]=t.useState(""),[r,x]=t.useState(!1),[c,m]=t.useState(""),[f,i]=t.useState(!1);t.useEffect(()=>{const s=new URLSearchParams(n.search),u=s.get("token"),d=s.get("user");if(u){if(localStorage.setItem("token",u),d)try{localStorage.setItem("user",d)}catch{}l("/user")}},[n.search]);const j=async s=>{if(s.preventDefault(),m(""),!a||!o){m("Please fill in all fields");return}i(!0)};return e.jsxs(e.Fragment,{children:[e.jsx(N,{variant:"login"}),e.jsxs("div",{className:"auth-layout user-auth",children:[e.jsx("div",{className:"auth-left",children:e.jsx(w,{title:"Welcome back",subtitle:"Sign in to monitor, track, and resolve.",imageSrc:S,imageAlt:"Login illustration"})}),e.jsx("div",{className:"auth-right",children:e.jsxs(A.form,{className:"auth-card auth-form",onSubmit:j,initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h3",{children:"Login"}),e.jsxs("div",{className:"auth-subtext",children:["New here? ",e.jsx(h,{to:"/register",children:"Create an account"})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("input",{id:"login-email",type:"email",value:a,onChange:s=>p(s.target.value),placeholder:" "}),e.jsx("label",{htmlFor:"login-email",children:"Email"})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"password-row",children:[e.jsx("input",{id:"login-password",type:r?"text":"password",value:o,onChange:s=>g(s.target.value),placeholder:" "}),e.jsx("label",{htmlFor:"login-password",children:"Password"}),e.jsx("button",{type:"button",className:"pwd-toggle",onClick:()=>x(s=>!s),"aria-label":r?"Hide password":"Show password",children:r?e.jsx(v,{}):e.jsx(y,{})})]})}),c&&e.jsx("div",{className:"form-error",children:c}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn primary",children:"Login"}),e.jsx(h,{className:"btn ghost",to:"/register",children:"Create Account"})]}),e.jsx(b,{})]})})]}),e.jsx(k,{open:f,purpose:"login",email:a,beginPayload:{password:o},onClose:()=>i(!1),onSuccess:s=>{try{localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user))}catch{}i(!1),l("/user")}})]})}export{z as default};
