import{r as s,j as e}from"./charts-FoNSDMOs.js";import{a as w}from"./api-CtY0n1IG.js";import{A as S}from"./AuthShowcase-HAqn0Ajv.js";import{C as y,D as N}from"./index-BMC4Z6Sv.js";import{N as b}from"./policeStations-BtwzKGb5.js";import{m as P}from"./motion-B__JDtHc.js";import{u as A,L as C}from"./index-t3l0xEWF.js";import"./react-BzrpNAyj.js";import"./icons-CvT1UHUk.js";import"./index-D8KJrxB-.js";import"./pdf-DU8byqIM.js";function J(){const h=A(),[i,u]=s.useState(""),[r,g]=s.useState(""),[o,x]=s.useState(""),[l,f]=s.useState(""),[m,d]=s.useState(!1),[n,j]=s.useState(!1),[p,c]=s.useState(""),v=async a=>{if(a.preventDefault(),c(""),!i||!r||!o||!l){c("Please fill in all fields");return}d(!0);try{const t=await w.policeRegister(i,r,o,l);localStorage.setItem("policeToken",t.token),localStorage.setItem("policeUser",JSON.stringify(t.officer)),h("/police/dashboard")}catch(t){c(t.message||"Registration failed")}finally{d(!1)}};return e.jsxs("div",{className:"auth-layout",children:[e.jsx("div",{className:"auth-left",children:e.jsx(S,{title:"Create Police Account",subtitle:"Register with your station to access the portal.",imageSrc:"/ashoka-pillar.jpg",imageAlt:"Ashoka Pillar - Satyameva Jayate"})}),e.jsx("div",{className:"auth-right",children:e.jsxs(P.form,{className:"auth-card auth-form",onSubmit:v,initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h3",{children:"Police Registration"}),e.jsxs("div",{className:"form-row",children:[e.jsx("input",{id:"police-register-username",type:"text",value:i,onChange:a=>u(a.target.value),placeholder:" "}),e.jsx("label",{htmlFor:"police-register-username",children:"Username"})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("input",{id:"police-register-email",type:"email",value:r,onChange:a=>g(a.target.value),placeholder:" "}),e.jsx("label",{htmlFor:"police-register-email",children:"Email"})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"password-row",children:[e.jsx("input",{id:"police-register-password",type:n?"text":"password",value:o,onChange:a=>x(a.target.value),placeholder:" "}),e.jsx("label",{htmlFor:"police-register-password",children:"Password"}),e.jsx("button",{type:"button",className:"pwd-toggle",onClick:()=>j(a=>!a),"aria-label":n?"Hide password":"Show password",children:n?e.jsx(y,{}):e.jsx(N,{})})]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("select",{id:"police-register-station",value:l,onChange:a=>f(a.target.value),children:[e.jsx("option",{value:"",children:"Select Police Station"}),b.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("label",{htmlFor:"police-register-station",children:"Police Station"})]}),p&&e.jsx("div",{className:"form-error",children:p}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn primary",disabled:m,children:m?"Creating...":"Register"}),e.jsx(C,{className:"btn ghost",to:"/police/login",children:"Already have an account"})]})]})})]})}export{J as default};
