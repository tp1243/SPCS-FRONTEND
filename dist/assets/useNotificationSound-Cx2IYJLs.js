import{r}from"./charts-FoNSDMOs.js";const h=new URL("/assets/Iphone%20SMS%20(Ting)-D7DA93s3.mp3",import.meta.url).href;function R(o){const c=r.useRef(null),i=r.useRef(0),f=r.useRef(o?.enabled??!0),u=r.useRef(!1),p=o?.cooldownMs??2e3,a=o?.volume??.8;r.useEffect(()=>{const e=new Audio;return e.src=h,e.preload="auto",e.volume=a,c.current=e,()=>{try{c.current?.pause()}catch{}c.current=null}},[a]);function d(){if(!f.current||document.visibilityState!=="visible")return;const e=Date.now();if(e-i.current<p)return;i.current=e;const t=c.current;if(t)try{t.currentTime=0;const n=t.play();n&&typeof n.then=="function"&&n.catch(()=>{try{t.pause()}catch{}l()})}catch{l()}}function m(){const e=c.current;if(!(!e||u.current))try{e.muted=!0,e.currentTime=0;const t=e.play();t&&typeof t.then=="function"?t.then(()=>{e.pause(),e.muted=!1,u.current=!0}).catch(()=>{}):(e.pause(),e.muted=!1,u.current=!0)}catch{}}function y(e){f.current=e}function l(){try{const e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),n=e.createGain();t.type="sine",t.frequency.value=880,n.gain.value=1e-4+a*.1,t.connect(n),n.connect(e.destination);const s=e.currentTime;t.start(s),n.gain.exponentialRampToValueAtTime(1e-5,s+.18),t.stop(s+.2),setTimeout(()=>{try{e.close()}catch{}},400)}catch{}}return{play:d,setEnabled:y,prime:m}}export{R as u};
