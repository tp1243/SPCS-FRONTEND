import{r as i,j as e}from"./charts-FoNSDMOs.js";import{a as w}from"./api-DtIH5hBN.js";import{A as v}from"./AuthShowcase-DUKvnRBk.js";import{l as S}from"./loginimg-DZn52-M4.js";import{C as N,D as y}from"./index-BMC4Z6Sv.js";import{N as b}from"./policeStations-BtwzKGb5.js";import{m as P}from"./motion-B__JDtHc.js";import{u as L,L as p}from"./index-pk8n74D1.js";import"./react-BzrpNAyj.js";import"./icons-CvT1UHUk.js";import"./index-D8KJrxB-.js";import"./pdf-DU8byqIM.js";function B(){const h=L(),[t,u]=i.useState(""),[o,g]=i.useState(""),[l,f]=i.useState(""),[c,m]=i.useState(!1),[r,x]=i.useState(!1),[d,n]=i.useState(""),j=async a=>{if(a.preventDefault(),n(""),!t||!o||!l){n("Please fill in all fields");return}m(!0);try{const s=await w.policeLogin(t,o,l);localStorage.setItem("policeToken",s.token),localStorage.setItem("policeUser",JSON.stringify(s.officer)),h("/police/dashboard")}catch(s){n(s.message||"Login failed")}finally{m(!1)}};return e.jsxs("div",{className:"auth-layout",children:[e.jsx("div",{className:"auth-left",children:e.jsx(v,{title:"Police Portal",subtitle:"Sign in to view and manage complaints.",imageSrc:S,imageAlt:"Police login illustration"})}),e.jsx("div",{className:"auth-right",children:e.jsxs(P.form,{className:"auth-card auth-form",onSubmit:j,initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h3",{children:"Police Login"}),e.jsxs("div",{className:"auth-subtext",children:["New officer? ",e.jsx(p,{to:"/police/register",children:"Create an account"})]}),e.jsxs("div",{className:"form-row",children:[e.jsx("input",{id:"police-login-email",type:"email",value:t,onChange:a=>u(a.target.value),placeholder:" "}),e.jsx("label",{htmlFor:"police-login-email",children:"Email"})]}),e.jsx("div",{className:"form-row",children:e.jsxs("div",{className:"password-row",children:[e.jsx("input",{id:"police-login-password",type:r?"text":"password",value:o,onChange:a=>g(a.target.value),placeholder:" "}),e.jsx("label",{htmlFor:"police-login-password",children:"Password"}),e.jsx("button",{type:"button",className:"pwd-toggle",onClick:()=>x(a=>!a),"aria-label":r?"Hide password":"Show password",children:r?e.jsx(N,{}):e.jsx(y,{})})]})}),e.jsxs("div",{className:"form-row",children:[e.jsxs("select",{id:"police-login-station",value:l,onChange:a=>f(a.target.value),children:[e.jsx("option",{value:"",children:"Select Police Station"}),b.map(a=>e.jsx("option",{value:a,children:a},a))]}),e.jsx("label",{htmlFor:"police-login-station",children:"Police Station"})]}),d&&e.jsx("div",{className:"form-error",children:d}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"btn primary",disabled:c,children:c?"Signing in...":"Login"}),e.jsx(p,{className:"btn ghost",to:"/police/register",children:"Create Police Account"})]})]})})]})}export{B as default};
